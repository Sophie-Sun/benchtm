<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Power calculation to detect overall treatment effect and interaction effect — calc_power • benchtm</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Power calculation to detect overall treatment effect and interaction effect — calc_power" />

<meta property="og:description" content="Calculate power for overall treatment effect (not utilizing any
covariates) and the power of the interaction test (under the true
model, which is Y=f_prog+(b0+b1*f_pred)*trt). The calculation is
performed conditional on a given data set of covariates (prognostic
effects specified via prog_vals; predictive effects specified via
pred_vals) and a treatment indicator. It is assumed that the
treatment indicator is independent of the columns in X). The power
of the overall test and the interaction test will depend on the
actual observed covariates. To make calculations independent of the
actual observed covariates (to focus on the super-population) it is
suggested to simulate a large number of covariates (e.g. 100 times
larger sample size than one would be interested in), based on this
one can determine the covariance matrix of the estimates. To obtain
a covariance matrix estimate for the sample size one is interested
in one can then scale up the covariance matrix estimate (e.g. by
100-fold in the example above)." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">benchtm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a01_User_guidance.html">Get started with benchtm</a>
    </li>
    <li>
      <a href="../articles/a02_Examples_Real_Data.html">Generate new outcome data for existing covariates</a>
    </li>
    <li>
      <a href="../articles/a03_Examples_Simulation.html">Using benchtm for a Simulation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Power calculation to detect overall treatment effect and interaction effect</h1>
    
    <div class="hidden name"><code>calc_power.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Calculate power for overall treatment effect (not utilizing any
covariates) and the power of the interaction test (under the true
model, which is Y=f_prog+(b0+b1*f_pred)*trt). The calculation is
performed conditional on a given data set of covariates (prognostic
effects specified via prog_vals; predictive effects specified via
pred_vals) and a treatment indicator. It is assumed that the
treatment indicator is independent of the columns in X). The power
of the overall test and the interaction test will depend on the
actual observed covariates. To make calculations independent of the
actual observed covariates (to focus on the super-population) it is
suggested to simulate a large number of covariates (e.g. 100 times
larger sample size than one would be interested in), based on this
one can determine the covariance matrix of the estimates. To obtain
a covariance matrix estimate for the sample size one is interested
in one can then scale up the covariance matrix estimate (e.g. by
100-fold in the example above).</p>
    
    </div>

    <pre class="usage"><span class='fu'>calc_power</span>(<span class='no'>b</span>, <span class='no'>scal</span>, <span class='no'>prog_vals</span>, <span class='no'>trt</span>, <span class='no'>pred_vals</span>, <span class='no'>alpha</span>, <span class='no'>type</span>, <span class='no'>sign_better</span>,
  <span class='no'>sigma_error</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>b</th>
      <td><p>Vector of length 2: Coefficient for treatment indicator
and predictive term in the true model</p></td>
    </tr>
    <tr>
      <th>scal</th>
      <td><p>Scaling parameter for the covariance matrix</p></td>
    </tr>
    <tr>
      <th>prog_vals</th>
      <td><p>Vector of main effects (one value per patient)</p></td>
    </tr>
    <tr>
      <th>trt</th>
      <td><p>Vector of treatment indicators</p></td>
    </tr>
    <tr>
      <th>pred_vals</th>
      <td><p>Vector of predictive effects (one value per
patient)</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>Vector of length 2, specifying the desired type 1
error for the overall and the interaction test. The overall test
is performed as a one-sided test (see also argument
sign_better). The interaction test is performed as a two-sided
test.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>type of data "continuous", "binary", "count" and
"survival" are allowed here, but calculations are only
implemented for "continuous" and "binary".</p></td>
    </tr>
    <tr>
      <th>sign_better</th>
      <td><p>1 if larger response is better, -1 is smaller
response is better (used in power calculation for the overall
test only)</p></td>
    </tr>
    <tr>
      <th>sigma_error</th>
      <td><p>Residual variance assumed for type = "continuous"</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Vector of two power values</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>###### generate a matrix of covariates</span>
<span class='no'>scal</span> <span class='kw'>&lt;-</span> <span class='fl'>100</span>
<span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='generate_X_dist.html'>generate_X_dist</a></span>(<span class='kw'>n</span><span class='kw'>=</span><span class='fl'>500</span>*<span class='no'>scal</span>, <span class='kw'>p</span><span class='kw'>=</span><span class='fl'>30</span>, <span class='kw'>rho</span><span class='kw'>=</span><span class='fl'>0.5</span>)
<span class='no'>trt</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='generate_trt.html'>generate_trt</a></span>(<span class='kw'>n</span><span class='kw'>=</span><span class='fl'>500</span>*<span class='no'>scal</span>, <span class='kw'>p_trt</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)
<span class='no'>prog</span> <span class='kw'>&lt;-</span> <span class='st'>"0.5*((X1=='Y')+X11)"</span>
<span class='no'>pred</span> <span class='kw'>&lt;-</span> <span class='st'>"X11&gt;0.5"</span>
<span class='no'>pred_vals</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/with'>with</a></span>(<span class='no'>X</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/eval'>eval</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/parse'>parse</a></span>(<span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>pred</span>)))
<span class='no'>prog_vals</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/with'>with</a></span>(<span class='no'>X</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/eval'>eval</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/parse'>parse</a></span>(<span class='kw'>text</span> <span class='kw'>=</span> <span class='no'>prog</span>)))
<span class='no'>alpha</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.025</span>,<span class='fl'>0.1</span>)
<span class='fu'>calc_power</span>(<span class='kw'>b</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='no'>scal</span>, <span class='no'>prog_vals</span>, <span class='no'>trt</span>, <span class='no'>pred_vals</span>, <span class='no'>alpha</span>,
           <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"continuous"</span>, <span class='kw'>sigma_error</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>sign_better</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; [1] 0.025 0.100</div><div class='input'><span class='fu'>calc_power</span>(<span class='kw'>b</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.2</span>,<span class='fl'>0.3</span>), <span class='no'>scal</span>, <span class='no'>prog_vals</span>, <span class='no'>trt</span>, <span class='no'>pred_vals</span>, <span class='no'>alpha</span>,
           <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"continuous"</span>, <span class='kw'>sigma_error</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>sign_better</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; [1] 0.7986897 0.6100791</div><div class='input'><span class='fu'>calc_power</span>(<span class='kw'>b</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0</span>,<span class='fl'>0</span>), <span class='no'>scal</span>, <span class='no'>prog_vals</span>, <span class='no'>trt</span>, <span class='no'>pred_vals</span>, <span class='no'>alpha</span>,
           <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"binary"</span>, <span class='kw'>sign_better</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; [1] 0.025 0.100</div><div class='input'><span class='fu'>calc_power</span>(<span class='kw'>b</span><span class='kw'>=</span><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>0.5</span>,<span class='fl'>0.8</span>), <span class='no'>scal</span>, <span class='no'>prog_vals</span>, <span class='no'>trt</span>, <span class='no'>pred_vals</span>, <span class='no'>alpha</span>,
           <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"binary"</span>, <span class='kw'>sign_better</span><span class='kw'>=</span><span class='fl'>1</span>)</div><div class='output co'>#&gt; [1] 0.9171350 0.5933426</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sophie Sun, Bjoern Bornkamp, Jiarui Lu, Ardalan Mirshani, Kostas Sechidis, Yao Chen, Novartis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

