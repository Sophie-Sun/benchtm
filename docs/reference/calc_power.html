<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Power calculation to detect overall treatment effect and interaction effect — calc_power • benchtm</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Power calculation to detect overall treatment effect and interaction effect — calc_power"><meta property="og:description" content="Calculate power for overall treatment effect (not utilizing any
covariates) and the power of the interaction test (under the true
model, which is Y=f_prog+(b0+b1*f_pred)*trt). The calculation is
performed conditional on a given data set of covariates (prognostic
effects specified via prog_vals; predictive effects specified via
pred_vals) and a treatment indicator. It is assumed that the
treatment indicator is independent of the columns in X). The power
of the overall test and the interaction test will depend on the
actual observed covariates. To make calculations independent of the
actual observed covariates (to focus on the super-population) it is
suggested to simulate a large number of covariates (e.g. 100 times
larger sample size than one would be interested in), based on this
one can determine the covariance matrix of the estimates. To obtain
a covariance matrix estimate for the sample size one is interested
in one can then scale up the covariance matrix estimate (e.g. by
100-fold in the example above)."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">benchtm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a01_User_guidance.html">Get started with benchtm</a>
    </li>
    <li>
      <a href="../articles/a02_Examples_Real_Data.html">Generate new outcome data for existing covariates</a>
    </li>
    <li>
      <a href="../articles/a03_Examples_Simulation.html">Using benchtm for a Simulation</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Power calculation to detect overall treatment effect and interaction effect</h1>
    
    <div class="hidden name"><code>calc_power.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate power for overall treatment effect (not utilizing any
covariates) and the power of the interaction test (under the true
model, which is Y=f_prog+(b0+b1*f_pred)*trt). The calculation is
performed conditional on a given data set of covariates (prognostic
effects specified via prog_vals; predictive effects specified via
pred_vals) and a treatment indicator. It is assumed that the
treatment indicator is independent of the columns in X). The power
of the overall test and the interaction test will depend on the
actual observed covariates. To make calculations independent of the
actual observed covariates (to focus on the super-population) it is
suggested to simulate a large number of covariates (e.g. 100 times
larger sample size than one would be interested in), based on this
one can determine the covariance matrix of the estimates. To obtain
a covariance matrix estimate for the sample size one is interested
in one can then scale up the covariance matrix estimate (e.g. by
100-fold in the example above).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_power</span><span class="op">(</span></span>
<span>  <span class="va">b</span>,</span>
<span>  <span class="va">scal</span>,</span>
<span>  <span class="va">prog_vals</span>,</span>
<span>  <span class="va">trt</span>,</span>
<span>  <span class="va">pred_vals</span>,</span>
<span>  <span class="va">alpha</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  <span class="va">sign_better</span>,</span>
<span>  <span class="va">sigma_error</span>,</span>
<span>  <span class="va">lambda0</span>,</span>
<span>  <span class="va">cens_time</span>,</span>
<span>  <span class="va">t_mile</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>b</dt>
<dd><p>Vector of length 2: Coefficient for treatment indicator
and predictive term in the true model</p></dd>
<dt>scal</dt>
<dd><p>Scaling parameter for the covariance matrix</p></dd>
<dt>prog_vals</dt>
<dd><p>Vector of main effects (one value per patient)</p></dd>
<dt>trt</dt>
<dd><p>Vector of treatment indicators</p></dd>
<dt>pred_vals</dt>
<dd><p>Vector of predictive effects (one value per
patient)</p></dd>
<dt>alpha</dt>
<dd><p>Vector of length 2, specifying the desired type 1
error for the overall and the interaction test. The overall test
is performed as a one-sided test (see also argument
sign_better). The interaction test is performed as a two-sided
test.</p></dd>
<dt>type</dt>
<dd><p>type of data "continuous", "binary", "count" and
"survival" are allowed here, but calculations are only
implemented for "continuous" and "binary".</p></dd>
<dt>sign_better</dt>
<dd><p>1 if larger response is better, -1 is smaller
response is better (used in power calculation for the overall
test only)</p></dd>
<dt>sigma_error</dt>
<dd><p>Residual variance assumed for type = "continuous"</p></dd>
<dt>lambda0</dt>
<dd><p>Intercept of exponential regression (on non-log scale)</p></dd>
<dt>cens_time</dt>
<dd><p>function that generates random censoring times</p></dd>
<dt>t_mile</dt>
<dd><p>time-point for comparing the survival probabilities
for test of overall treatment effect</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Vector of two power values</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">###### generate a matrix of covariates</span></span></span>
<span class="r-in"><span><span class="va">scal</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_X_dist.html">generate_X_dist</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">500</span> <span class="op">*</span> <span class="va">scal</span>, p <span class="op">=</span> <span class="fl">30</span>, rho <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_trt.html">generate_trt</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">500</span> <span class="op">*</span> <span class="va">scal</span>, p_trt <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prog</span> <span class="op">&lt;-</span> <span class="st">"0.5*((X1=='Y')+X11)"</span></span></span>
<span class="r-in"><span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="st">"X11&gt;0.5"</span></span></span>
<span class="r-in"><span><span class="va">pred_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">X</span>, <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">pred</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prog_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">X</span>, <span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">prog</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">calc_power</span><span class="op">(</span></span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="va">scal</span>, <span class="va">prog_vals</span>, <span class="va">trt</span>, <span class="va">pred_vals</span>, <span class="va">alpha</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"continuous"</span>, sigma_error <span class="op">=</span> <span class="fl">1</span>, sign_better <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.025 0.100</span>
<span class="r-in"><span><span class="fu">calc_power</span><span class="op">(</span></span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>, <span class="va">scal</span>, <span class="va">prog_vals</span>, <span class="va">trt</span>, <span class="va">pred_vals</span>, <span class="va">alpha</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"continuous"</span>, sigma_error <span class="op">=</span> <span class="fl">1</span>, sign_better <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.7954262 0.6079201</span>
<span class="r-in"><span><span class="fu">calc_power</span><span class="op">(</span></span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>, <span class="va">scal</span>, <span class="va">prog_vals</span>, <span class="va">trt</span>, <span class="va">pred_vals</span>, <span class="va">alpha</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"binary"</span>, sign_better <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.025 0.100</span>
<span class="r-in"><span><span class="fu">calc_power</span><span class="op">(</span></span></span>
<span class="r-in"><span>  b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.8</span><span class="op">)</span>, <span class="va">scal</span>, <span class="va">prog_vals</span>, <span class="va">trt</span>, <span class="va">pred_vals</span>, <span class="va">alpha</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"binary"</span>, sign_better <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.9149188 0.5890856</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sophie Sun, Bjoern Bornkamp, Jiarui Lu, Ardalan
Mirshani, Kostas Sechidis, Yao Chen, Novartis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

